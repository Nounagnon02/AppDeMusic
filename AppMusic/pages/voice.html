<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voix & Chant - MaestroSpirit</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/main.css">
</head>
<body>
    <div class="header-section p-6 text-center">
        <h1 class="text-2xl font-display mb-2">üé§ Voix & Chant</h1>
        <p class="text-sm opacity-90">D√©veloppez votre technique vocale</p>
    </div>

    <div class="px-4" style="padding-top: 2rem; padding-bottom: 8rem;">
        <!-- √âchauffement vocal -->
        <div class="progress-card exercise-card p-4 mb-4 animate-fadeInUp">
            <h3 class="font-semibold mb-3">üî• √âchauffement Vocal (5 min)</h3>
            <p class="text-sm text-gray-600 mb-3">Pr√©parez votre voix avant de chanter</p>
            <ol class="text-sm mb-3 pl-4">
                <li>1. Respirations profondes (30 sec)</li>
                <li>2. L√®vres qui vibrent "Brrrr" (1 min)</li>
                <li>3. Sir√®nes "Ng" grave ‚Üí aigu (1 min)</li>
                <li>4. Gammes "Ma-Me-Mi-Mo-Mu" (2 min)</li>
                <li>5. Vocalises "La" Do-R√©-Mi-Fa-Sol (30 sec)</li>
            </ol>
            <button class="quick-action-btn w-full" onclick="startVocalWarmup()">
                Commencer l'√©chauffement
            </button>
        </div>

        <!-- Respiration diaphragmatique -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">ü´Å Respiration Diaphragmatique</h3>
            <p class="text-sm text-gray-600 mb-3">Base de toute technique vocale</p>
            <div class="text-sm mb-3">
                <p><strong>Position:</strong> Allong√© ou debout, main sur le ventre</p>
                <p><strong>Technique:</strong></p>
                <ul class="pl-4">
                    <li>‚Ä¢ Inspirez 4 temps (ventre se gonfle)</li>
                    <li>‚Ä¢ Retenez 4 temps</li>
                    <li>‚Ä¢ Expirez 6 temps (ventre rentre)</li>
                    <li>‚Ä¢ R√©p√©tez 10 fois</li>
                </ul>
            </div>
            <button class="quick-action-btn w-full" onclick="startBreathingExercise()">
                Pratiquer la respiration
            </button>
        </div>

        <!-- Vocalises -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üéµ Vocalises Classiques</h3>
            <p class="text-sm text-gray-600 mb-3">Exercices m√©lodiques pour la technique</p>
            <div class="grid grid-cols-2 gap-2 mb-3">
                <button class="quick-action-btn text-sm" onclick="playVocalise('do-re-mi')">
                    Do-R√©-Mi-R√©-Do
                </button>
                <button class="quick-action-btn text-sm" onclick="playVocalise('arpege')">
                    Arp√®ges Maj
                </button>
                <button class="quick-action-btn text-sm" onclick="playVocalise('gamme')">
                    Gamme compl√®te
                </button>
                <button class="quick-action-btn text-sm" onclick="playVocalise('intervalle')">
                    Intervalles
                </button>
            </div>
        </div>

        <!-- R√©sonance -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üì¢ Exercices de R√©sonance</h3>
            <p class="text-sm text-gray-600 mb-3">D√©veloppez votre projection vocale</p>
            <div class="grid grid-cols-3 gap-2">
                <button class="quick-action-btn text-xs" onclick="startResonanceExercise('chest')">
                    ü´Å Poitrine
                </button>
                <button class="quick-action-btn text-xs" onclick="startResonanceExercise('head')">
                    üß† T√™te
                </button>
                <button class="quick-action-btn text-xs" onclick="startResonanceExercise('mix')">
                    üé≠ Mix Voice
                </button>
            </div>
        </div>

        <!-- Articulation -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üó£Ô∏è Articulation & Diction</h3>
            <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn text-sm" onclick="startArticulationExercise('consonants')">
                    Consonnes
                </button>
                <button class="quick-action-btn text-sm" onclick="startArticulationExercise('vowels')">
                    Voyelles
                </button>
                <button class="quick-action-btn text-sm" onclick="startArticulationExercise('tongue')">
                    Langue
                </button>
                <button class="quick-action-btn text-sm" onclick="startArticulationExercise('lips')">
                    L√®vres
                </button>
            </div>
        </div>

        <!-- Tessiture -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üìà Extension de Tessiture</h3>
            <div class="mb-3">
                <div class="flex justify-between text-xs mb-1">
                    <span>Grave</span>
                    <span>Aigu</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="bg-gradient-to-r from-blue-500 to-red-500 h-2 rounded-full" style="width: 60%"></div>
                </div>
                <p class="text-xs text-center mt-1">Tessiture actuelle: Do3 - Sol5</p>
            </div>
            <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn text-sm" onclick="startRangeExercise('low')">
                    ‚¨áÔ∏è Graves
                </button>
                <button class="quick-action-btn text-sm" onclick="startRangeExercise('high')">
                    ‚¨ÜÔ∏è Aigus
                </button>
            </div>
        </div>

        <!-- Vibrato -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üåä Technique du Vibrato</h3>
            <p class="text-sm text-gray-600 mb-3">Oscillation naturelle de la voix</p>
            <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn text-sm" onclick="startVibratoExercise('natural')">
                    üéµ Naturel
                </button>
                <button class="quick-action-btn text-sm" onclick="startVibratoExercise('controlled')">
                    üéõÔ∏è Contr√¥l√©
                </button>
            </div>
        </div>

        <!-- Styles vocaux -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üé≠ Styles Vocaux</h3>
            <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn text-sm" onclick="startStyleExercise('classical')">
                    üéº Classique
                </button>
                <button class="quick-action-btn text-sm" onclick="startStyleExercise('pop')">
                    üé§ Pop/Rock
                </button>
                <button class="quick-action-btn text-sm" onclick="startStyleExercise('jazz')">
                    üé∑ Jazz
                </button>
                <button class="quick-action-btn text-sm" onclick="startStyleExercise('gospel')">
                    ‚õ™ Gospel
                </button>
            </div>
        </div>

        <!-- Exercices avanc√©s -->
        <div class="progress-card p-4 mb-4">
            <h3 class="font-semibold mb-3">üöÄ Techniques Avanc√©es</h3>
            <div class="grid grid-cols-2 gap-2">
                <button class="quick-action-btn text-sm" onclick="startAdvancedExercise('runs')">
                    üèÉ Runs & Riffs
                </button>
                <button class="quick-action-btn text-sm" onclick="startAdvancedExercise('belting')">
                    üí™ Belting
                </button>
                <button class="quick-action-btn text-sm" onclick="startAdvancedExercise('falsetto')">
                    üëª Falsetto
                </button>
                <button class="quick-action-btn text-sm" onclick="startAdvancedExercise('growl')">
                    üê∫ Growl
                </button>
            </div>
        </div>
    </div>

    <nav class="nav-bar">
        <div class="flex justify-around py-2">
            <a href="../index.html" class="nav-item">
                <span>üè†</span>
                <span class="text-xs">Accueil</span>
            </a>
            <a href="voice.html" class="nav-item active">
                <span>üé§</span>
                <span class="text-xs">Voix</span>
            </a>
            <a href="instruments.html" class="nav-item">
                <span>üé∏</span>
                <span class="text-xs">Instruments</span>
            </a>
            <a href="theory.html" class="nav-item">
                <span>üìö</span>
                <span class="text-xs">Th√©orie</span>
            </a>
            <a href="tools.html" class="nav-item">
                <span>üõ†Ô∏è</span>
                <span class="text-xs">Outils</span>
            </a>
            <a href="profile.html" class="nav-item">
                <span>üë§</span>
                <span class="text-xs">Profil</span>
            </a>
        </div>
    </nav>

    <script src="../assets/js/app.js"></script>
    <script>
        // Fonction globale pour nettoyer tous les modals et overlays
        function cleanupModals() {
            // Supprimer tous les √©l√©ments avec position fixed
            document.querySelectorAll('[style*="position: fixed"]').forEach(el => el.remove());
            document.querySelectorAll('[style*="position:fixed"]').forEach(el => el.remove());
            
            // Nettoyer les styles du body
            document.body.style.overflow = '';
            document.body.style.filter = '';
            document.body.style.opacity = '';
            document.body.style.background = '';
            
            // Nettoyer les overlays potentiels
            document.querySelectorAll('.modal-overlay, .overlay').forEach(el => el.remove());
        }
        
        // Nettoyer au chargement de la page
        document.addEventListener('DOMContentLoaded', cleanupModals);
        
        // Nettoyer quand on quitte la page
        window.addEventListener('beforeunload', cleanupModals);
        function startVocalWarmup() {
            cleanupModals();
            const steps = [
                { text: "Respirations profondes", duration: 30 },
                { text: "L√®vres qui vibrent 'Brrrr'", duration: 60 },
                { text: "Sir√®nes 'Ng' grave ‚Üí aigu", duration: 60 },
                { text: "Gammes 'Ma-Me-Mi-Mo-Mu'", duration: 120 },
                { text: "Vocalises 'La' Do-R√©-Mi-Fa-Sol", duration: 30 }
            ];
            
            let currentStep = 0;
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.onclick = (e) => { if(e.target === modal) cleanupModals(); };
            
            function showStep() {
                if (currentStep >= steps.length) {
                    cleanupModals();
                    app.updateProgress('voice', 20);
                    return;
                }
                
                const step = steps[currentStep];
                modal.innerHTML = `
                    <div style="background: white; padding: 2rem; border-radius: 16px; text-align: center; max-width: 300px;">
                        <h3>\u00c9tape ${currentStep + 1}/5</h3>
                        <p style="margin: 1rem 0; font-weight: bold;">${step.text}</p>
                        <div id="timer" style="font-size: 2rem; color: #D4AF37; margin: 1rem 0;">${step.duration}</div>
                        <button onclick="nextStep()" style="background: #D4AF37; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px;">Suivant</button>
                    </div>
                `;
                
                let timeLeft = step.duration;
                const timer = modal.querySelector('#timer');
                const interval = setInterval(() => {
                    timeLeft--;
                    timer.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(interval);
                        currentStep++;
                        showStep();
                    }
                }, 1000);
                
                window.nextStep = () => {
                    clearInterval(interval);
                    currentStep++;
                    showStep();
                };
            }
            
            document.body.appendChild(modal);
            showStep();
        }
        
        function startBreathingExercise() {
            cleanupModals();
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            modal.onclick = (e) => { if(e.target === modal) cleanupModals(); };
            
            let cycle = 0;
            const phases = ['Inspirez', 'Retenez', 'Expirez', 'Pause'];
            const durations = [4, 4, 6, 2];
            let currentPhase = 0;
            
            function runCycle() {
                if (cycle >= 10) {
                    cleanupModals();
                    app.updateProgress('voice', 15);
                    return;
                }
                
                const phase = phases[currentPhase];
                const duration = durations[currentPhase];
                
                modal.innerHTML = `
                    <div style="background: white; padding: 2rem; border-radius: 16px; text-align: center;">
                        <h3>Respiration ${cycle + 1}/10</h3>
                        <p style="font-size: 1.5rem; margin: 1rem 0; color: #D4AF37;">${phase}</p>
                        <div id="breath-timer" style="font-size: 3rem; font-weight: bold;">${duration}</div>
                        <div style="width: 100px; height: 100px; border-radius: 50%; background: #D4AF37; margin: 1rem auto; transform: scale(${phase === 'Inspirez' ? '1.2' : '0.8'}); transition: transform 0.5s;"></div>
                    </div>
                `;
                
                let timeLeft = duration;
                const timer = modal.querySelector('#breath-timer');
                const interval = setInterval(() => {
                    timeLeft--;
                    timer.textContent = timeLeft;
                    if (timeLeft <= 0) {
                        clearInterval(interval);
                        currentPhase++;
                        if (currentPhase >= phases.length) {
                            currentPhase = 0;
                            cycle++;
                        }
                        runCycle();
                    }
                }, 1000);
            }
            
            document.body.appendChild(modal);
            runCycle();
        }
        
        function playVocalise(type) {
            const exercises = {
                'do-re-mi': 'Do-R√©-Mi-R√©-Do sur toutes les tonalit√©s',
                'arpege': 'Arp√®ges majeurs: Do-Mi-Sol-Do',
                'gamme': 'Gamme compl√®te Do majeur montante et descendante',
                'intervalle': 'Intervalles: Do-R√©, Do-Mi, Do-Fa, Do-Sol, Do-La, Do-Si, Do-Do'
            };
            
            alert(`Exercice: ${exercises[type]}\n\nChantez lentement en suivant le piano virtuel dans la section Outils.`);
            app.updateProgress('voice', 10);
        }
        
        function startResonanceExercise(type) {
            const exercises = {
                chest: {
                    title: "R√©sonance de Poitrine",
                    steps: [
                        "Main sur la poitrine",
                        "Chantez 'Mmmm' grave (Do2-Sol3)",
                        "Sentez les vibrations",
                        "Ouvrez sur 'Mah' en gardant la r√©sonance",
                        "R√©p√©tez sur 'Moh', 'Mou'"
                    ]
                },
                head: {
                    title: "R√©sonance de T√™te",
                    steps: [
                        "Main sur le nez/front",
                        "Chantez 'Nnn' aigu (Sol4-Do6)",
                        "Vibrations dans le masque",
                        "Ouvrez sur 'Nah' l√©ger",
                        "Gardez la sensation de hauteur"
                    ]
                },
                mix: {
                    title: "Mix Voice",
                    steps: [
                        "Commencez en r√©sonance de poitrine",
                        "Montez progressivement 'Ng-Ah'",
                        "Trouvez le point de bascule",
                        "M√©langez les deux r√©sonances",
                        "Travaillez la zone de passage"
                    ]
                }
            };
            
            showExerciseModal(exercises[type]);
        }
        
        function startArticulationExercise(type) {
            const exercises = {
                consonants: {
                    title: "Consonnes Pr√©cises",
                    steps: [
                        "Pa-Ta-Ka-Pa-Ta-Ka (rapide)",
                        "Bra-Dra-Gra-Bra-Dra-Gra",
                        "Tip-Top-Tup-Tip-Top-Tup",
                        "Red-Leather-Yellow-Leather",
                        "Articulez sans forcer"
                    ]
                },
                vowels: {
                    title: "Voyelles Pures",
                    steps: [
                        "A-E-I-O-U (bouche ronde)",
                        "Gardez la m√™me hauteur",
                        "Transitions fluides",
                        "√âvitez les diphtongues",
                        "R√©sonance constante"
                    ]
                },
                tongue: {
                    title: "Agilit√© de la Langue",
                    steps: [
                        "La-La-La (pointe mobile)",
                        "Tra-Tre-Tri-Tro-Tru",
                        "Roulements de R",
                        "Tongue twisters",
                        "D√©tente entre exercices"
                    ]
                },
                lips: {
                    title: "Mobilit√© des L√®vres",
                    steps: [
                        "Brrrr (l√®vres qui vibrent)",
                        "Ba-Be-Bi-Bo-Bu",
                        "Ma-Me-Mi-Mo-Mu",
                        "Wa-We-Wi-Wo-Wu",
                        "Sourire/moue altern√©s"
                    ]
                }
            };
            
            showExerciseModal(exercises[type]);
        }
        
        function startRangeExercise(type) {
            const exercises = {
                low: {
                    title: "Extension des Graves",
                    steps: [
                        "Commencez √† votre note la plus basse confortable",
                        "Descendez par demi-tons sur 'Mah'",
                        "Gardez la r√©sonance de poitrine",
                        "Ne forcez jamais",
                        "Remontez si tension"
                    ]
                },
                high: {
                    title: "Extension des Aigus",
                    steps: [
                        "√âchauffement complet obligatoire",
                        "Montez par demi-tons sur 'Nah'",
                        "Utilisez la r√©sonance de t√™te",
                        "Gardez le larynx stable",
                        "Arr√™tez si douleur"
                    ]
                }
            };
            
            showExerciseModal(exercises[type]);
        }
        
        function startVibratoExercise(type) {
            const exercises = {
                natural: {
                    title: "Vibrato Naturel",
                    steps: [
                        "Tenez une note longue et stable",
                        "Rel√¢chez compl√®tement la gorge",
                        "Laissez le vibrato appara√Ætre naturellement",
                        "Ne forcez aucun mouvement",
                        "Patience - cela vient avec le temps"
                    ]
                },
                controlled: {
                    title: "Contr√¥le du Vibrato",
                    steps: [
                        "Note tenue sans vibrato",
                        "Ajoutez le vibrato progressivement",
                        "Variez la vitesse (lent/rapide)",
                        "Contr√¥lez l'amplitude",
                        "Alternez avec/sans vibrato"
                    ]
                }
            };
            
            showExerciseModal(exercises[type]);
        }
        
        function startStyleExercise(style) {
            const exercises = {
                classical: {
                    title: "Style Classique",
                    steps: [
                        "Posture droite, respiration basse",
                        "Voyelles pures et rondes",
                        "Legato et phras√© musical",
                        "Vibrato contr√¥l√©",
                        "Diction claire en latin/italien"
                    ]
                },
                pop: {
                    title: "Style Pop/Rock",
                    steps: [
                        "Mix voice pr√©dominant",
                        "Attaques franches",
                        "Utilisation du belting mod√©r√©",
                        "Effets vocaux (runs, breaks)",
                        "√âmotion et attitude"
                    ]
                },
                jazz: {
                    title: "Style Jazz",
                    steps: [
                        "Phras√© swing et syncop√©",
                        "Scat singing (improvisation)",
                        "Vibrato expressif",
                        "Bends et glissandos",
                        "Interaction avec les instruments"
                    ]
                },
                gospel: {
                    title: "Style Gospel",
                    steps: [
                        "Puissance et √©motion",
                        "Melismes et ornementations",
                        "Call and response",
                        "Belting avec soutien",
                        "Spiritualit√© dans l'interpr√©tation"
                    ]
                }
            };
            
            showExerciseModal(exercises[style]);
        }
        
        function startAdvancedExercise(technique) {
            const exercises = {
                runs: {
                    title: "Runs & Riffs",
                    steps: [
                        "Commencez lentement sur gammes",
                        "Acc√©l√©rez progressivement",
                        "Gardez chaque note distincte",
                        "Travaillez par petits groupes",
                        "Ajoutez l'expression musicale"
                    ]
                },
                belting: {
                    title: "Technique du Belting",
                    steps: [
                        "ATTENTION: Technique avanc√©e!",
                        "√âchauffement complet obligatoire",
                        "Soutien abdominal fort",
                        "Larynx l√©g√®rement √©lev√©",
                        "Arr√™tez si fatigue vocale"
                    ]
                },
                falsetto: {
                    title: "Falsetto/Voix de T√™te",
                    steps: [
                        "Rel√¢chement des cordes vocales",
                        "Son a√©rien et l√©ger",
                        "Pas de pression",
                        "Travaillez la connexion avec la voix de poitrine",
                        "Utilisez pour les aigus doux"
                    ]
                },
                growl: {
                    title: "Growl/Distorsion",
                    steps: [
                        "ATTENTION: Technique risqu√©e!",
                        "Commencez par des 'Ah' rugueux",
                        "Utilisez les fausses cordes vocales",
                        "Hydratation constante",
                        "Limitez la pratique (5-10 min max)"
                    ]
                }
            };
            
            showExerciseModal(exercises[technique]);
        }
        
        function showExerciseModal(exercise) {
            cleanupModals();
            const modal = document.createElement('div');
            modal.className = 'modal-overlay';
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(17, 24, 39, 0.75); backdrop-filter: blur(8px);
                display: flex; align-items: center; justify-content: center;
                z-index: 1000; padding: 2rem; animation: fadeIn 0.3s ease;
            `;
            modal.onclick = (e) => { if(e.target === modal) cleanupModals(); };
            
            modal.innerHTML = `
                <div style="
                    background: white; padding: 2.5rem; border-radius: 24px;
                    max-width: 480px; width: 100%; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
                    border: 1px solid #e5e7eb; position: relative; overflow: hidden;
                ">
                    <div style="
                        position: absolute; top: 0; left: 0; right: 0; height: 4px;
                        background: linear-gradient(90deg, #667eea, #06b6d4);
                    "></div>
                    
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div style="
                            width: 64px; height: 64px; background: linear-gradient(135deg, #667eea, #06b6d4);
                            border-radius: 50%; display: flex; align-items: center; justify-content: center;
                            margin: 0 auto 1rem; font-size: 1.5rem;
                        ">üéµ</div>
                        <h3 style="
                            color: #1f2937; font-size: 1.5rem; font-weight: 700;
                            margin-bottom: 0.5rem; line-height: 1.2;
                        ">${exercise.title}</h3>
                        <p style="color: #6b7280; font-size: 0.9rem;">Suivez les √©tapes ci-dessous</p>
                    </div>
                    
                    <div style="margin-bottom: 2.5rem; max-height: 300px; overflow-y: auto;">
                        ${exercise.steps.map((step, index) => `
                            <div style="
                                display: flex; align-items: flex-start; margin-bottom: 1.25rem;
                                padding: 1rem; background: #f9fafb; border-radius: 16px;
                                border: 1px solid #e5e7eb; transition: all 0.2s ease;
                            ">
                                <div style="
                                    background: linear-gradient(135deg, #667eea, #06b6d4);
                                    color: white; border-radius: 50%; width: 28px; height: 28px;
                                    display: flex; align-items: center; justify-content: center;
                                    font-size: 0.8rem; font-weight: 700; margin-right: 1rem;
                                    flex-shrink: 0; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                                ">${index + 1}</div>
                                <p style="
                                    margin: 0; font-size: 0.95rem; line-height: 1.5;
                                    color: #374151; font-weight: 500;
                                ">${step}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button onclick="cleanupModals()" style="
                            flex: 1; background: #f3f4f6; color: #374151; border: none;
                            padding: 1rem 1.5rem; border-radius: 12px; font-weight: 600;
                            cursor: pointer; transition: all 0.3s ease; font-size: 0.9rem;
                        ">Fermer</button>
                        <button onclick="startExerciseTimer('${exercise.title}')" style="
                            flex: 2; background: linear-gradient(135deg, #667eea, #06b6d4);
                            color: white; border: none; padding: 1rem 1.5rem; border-radius: 12px;
                            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
                            font-size: 0.9rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                        ">üöÄ Commencer l'exercice</button>
                    </div>
                </div>
                <style>
                    @keyframes fadeIn {
                        from { opacity: 0; transform: scale(0.95); }
                        to { opacity: 1; transform: scale(1); }
                    }
                </style>
            `;
            
            document.body.appendChild(modal);
        }
        
        function startExerciseTimer(exerciseName) {
            cleanupModals();
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(55, 65, 81, 0.95));
                backdrop-filter: blur(12px); display: flex; align-items: center;
                justify-content: center; z-index: 1000;
            `;
            
            let timeLeft = 300; // 5 minutes
            
            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const progress = ((300 - timeLeft) / 300) * 100;
                
                modal.innerHTML = `
                    <div style="
                        background: white; padding: 3rem; border-radius: 32px;
                        text-align: center; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
                        max-width: 400px; width: 90%; position: relative; overflow: hidden;
                    ">
                        <div style="
                            position: absolute; top: 0; left: 0; height: 4px;
                            background: linear-gradient(90deg, #667eea, #06b6d4);
                            width: ${progress}%; transition: width 1s ease;
                        "></div>
                        
                        <div style="
                            width: 80px; height: 80px; background: linear-gradient(135deg, #667eea, #06b6d4);
                            border-radius: 50%; display: flex; align-items: center; justify-content: center;
                            margin: 0 auto 1.5rem; font-size: 2rem; animation: bounce 2s infinite;
                        ">üé§</div>
                        
                        <h3 style="
                            color: #1f2937; font-size: 1.25rem; font-weight: 700;
                            margin-bottom: 2rem; line-height: 1.3;
                        ">${exerciseName}</h3>
                        
                        <div style="
                            font-size: 3.5rem; font-weight: 800; margin: 2rem 0;
                            background: linear-gradient(135deg, #667eea, #06b6d4);
                            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
                            background-clip: text; letter-spacing: -0.02em;
                        ">${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}</div>
                        
                        <div style="
                            width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px;
                            margin: 2rem 0; overflow: hidden;
                        ">
                            <div style="
                                height: 100%; background: linear-gradient(90deg, #667eea, #06b6d4);
                                width: ${progress}%; transition: width 1s ease; border-radius: 4px;
                            "></div>
                        </div>
                        
                        <p style="color: #6b7280; font-size: 0.9rem; margin-bottom: 2rem;">
                            Temps √©coul√©: ${Math.floor((300 - timeLeft) / 60)}:${((300 - timeLeft) % 60).toString().padStart(2, '0')}
                        </p>
                        
                        <button onclick="cleanupModals(); app.updateProgress('voice', 20);" style="
                            background: linear-gradient(135deg, #10b981, #059669); color: white;
                            border: none; padding: 1rem 2rem; border-radius: 16px;
                            font-weight: 600; cursor: pointer; font-size: 1rem;
                            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
                            transition: all 0.3s ease;
                        ">‚úì Terminer l'exercice</button>
                    </div>
                    <style>
                        @keyframes bounce {
                            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                            40% { transform: translateY(-10px); }
                            60% { transform: translateY(-5px); }
                        }
                    </style>
                `;
                
                if (timeLeft <= 0) {
                    modal.remove();
                    app.updateProgress('voice', 20);
                    return;
                }
                
                timeLeft--;
                setTimeout(updateTimer, 1000);
            }
            
            document.body.appendChild(modal);
            updateTimer();
        }
    </script>
</body>
</html>